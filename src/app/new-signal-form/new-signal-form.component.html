<div class="form-container">
  <div class="header-title">
    <div>
      <h2>New</h2>
      <h4>@angular/forms/signals</h4>
    </div>
    <div>
      <img src="ng21.webp" alt="" class="ng21" />
    </div>
  </div>

  <form (ngSubmit)="onSubmit()">
    <div class="form-field">
      <label for="email-signal">Email</label>
      <input
        id="email-signal"
        type="email"
        [field]="userForm.email"
        [class.invalid]="userForm.email().touched() && userForm.email().invalid()"
      />
      @if (userForm.email().touched() && userForm.email().invalid()) {
      <span class="error">
        {{ userForm.email().errors()[0].message }}
      </span>
      }
    </div>

    <div class="form-field">
      <label for="password-signal">Password</label>
      <input
        id="password-signal"
        type="password"
        [field]="userForm.password"
        [class.invalid]="userForm.password().touched() && userForm.password().invalid()"
      />
      @if (userForm.password().touched() && userForm.password().invalid()) {
      <span class="error">
        {{ userForm.password().errors()[0].message }}
      </span>
      }
    </div>

    <div class="form-field">
      <label for="confirmPassword-signal">Confirm Password</label>
      <input
        id="confirmPassword-signal"
        type="password"
        [field]="userForm.confirmPassword"
        [class.invalid]="
          userForm.confirmPassword().touched() && userForm.confirmPassword().invalid()
        "
      />
      @if (userForm.confirmPassword().touched() && userForm.confirmPassword().invalid()) {
      <span class="error">
        {{ userForm.confirmPassword().errors()[0].message }}
      </span>
      }
    </div>
    <div class="form-field">
      <label class="checkbox-label">
        <input type="checkbox" [field]="userForm.setUsername" />
        Set username
      </label>
    </div>

    <div class="form-field">
      <label for="username-signal">Username</label>
      <input
        id="username-signal"
        type="text"
        [field]="userForm.username"
        [class.invalid]="userForm.username().touched() && userForm.username().invalid()"
      />
      @if (userForm.username().touched() && userForm.username().invalid() &&
      !userForm.username().disabled()) {
      <span class="error">
        {{ userForm.username().errors()[0].message }}
      </span>
      }
    </div>

    <div class="form-field">
      <label>Reincarnation Wishes (max 3)</label>
      @for (wish of formModel().reincarnationWishes; track $index) {
      <div class="array-item">
        <input
          type="text"
          [field]="userForm.reincarnationWishes[$index]"
          [class.invalid]="
            userForm.reincarnationWishes[$index]().touched() &&
            userForm.reincarnationWishes[$index]().invalid()
          "
          placeholder="What do you wish to be reincarnated as?"
        />
        <button type="button" class="remove-btn" (click)="removeReincarnationWish($index)">
          Remove
        </button>
      </div>
      }
      <button
        type="button"
        class="add-btn"
        (click)="addReincarnationWish()"
        [disabled]="formModel().reincarnationWishes.length >= 3"
      >
        Add Reincarnation Wish
      </button>
    </div>

    <button type="submit" [disabled]="userForm().invalid()">Submit</button>
  </form>
</div>
